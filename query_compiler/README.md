EmptyHeaded Query Compiler
----------------------------

Table of Contents
-----------------

  * [Usage](#usage)
  * [Overview](#overview)
  * [Query Plans](#query-plans)

Overview
------------

A call to `Emptyheaded.query` kicks off a run of the query compiler, which receives the string that you passed to `Emptyheaded.query`, generates a query plan for it by finding min fhw generalized hypertree decompositions (GHD) and then using various heuristics to pick one of these GHDs. Based on this query plan, it then generates C++ that makes use of the Emptyheaded storage engine.  

Usage
--------

The query compiler is normally run by ipython notebook, but you can also run it from the command line. You can build the jar by running `sbt pack` from the query_compiler directory. You can then run the query compiler by running:

```
./target/pack/bin/query-compiler -c example_config/config.json -q "Triangle\(a,b,c\):-Edge\(a,b\),Edge\(b,c\),Edge\(a,c\)\."
```
This would run query compiler with the specified config (note that this is normally generated by a call of `EmptyHeaded.createDB`), on the triangle query. You can find the generated C++ code in `Emptyheaded/storage_engine/codegen/Query.cpp`. If you run with the `--explain` option, the compiler will write the query plan to stdout (no codegen).

You can get a more complete explanation of all the options, including an option for running codegen from a user-specified json query plan (useful if you have a query plan you want to try that our query planner doesn't produce), by running with `--help`.

Query Plans
----------------
The fields in the query plans are fairly extensively documented in [`src/main/scala/QueryPlan.scala`](https://github.com/HazyResearch/EmptyHeaded/blob/master/query_compiler/src/main/scala/QueryPlan.scala).
